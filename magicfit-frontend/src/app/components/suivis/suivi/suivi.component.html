<div class="container mt-4 text-white">
  <h2 class="text-center mb-4 border-bottom pb-2">ğŸ“Š Suivi des utilisateurs</h2>

  <!-- âœ… FORMULAIRE Dâ€™AJOUT -->
  <form [formGroup]="suiviForm" (ngSubmit)="ajouterSuivi()" class="bg-dark p-4 rounded shadow mb-4">
    <div class="row g-3">
      <!-- âœ… Utilisateur -->
      <div class="col-md-3">
        <label for="user_id" class="form-label">Utilisateur</label>
        <select formControlName="user_id" class="form-select" required>
          <option value="">-- SÃ©lectionner un utilisateur --</option>
          <option *ngFor="let u of utilisateurs" [value]="u.id">
            {{ u.name }} ({{ u.email }})
          </option>
        </select>
      </div>

      <!-- âœ… Date -->
      <div class="col-md-2">
        <label for="date" class="form-label">Date</label>
        <input formControlName="date" type="date" class="form-control" required>
      </div>

      <!-- âœ… Poids -->
      <div class="col-md-2">
        <label for="poids" class="form-label">Poids (kg)</label>
        <input formControlName="poids" type="number" class="form-control">
      </div>

      <!-- âœ… RÃ©pÃ©titions -->
      <div class="col-md-2">
        <label for="repetitions" class="form-label">RÃ©pÃ©titions</label>
        <input formControlName="repetitions" type="number" class="form-control">
      </div>

      <!-- âœ… Battements de cÅ“ur -->
      <div class="col-md-2">
        <label for="battement_heart_rate" class="form-label">BPM â¤ï¸</label>
        <input formControlName="battement_heart_rate" type="number" class="form-control">
      </div>

      <!-- âœ… Calories -->
      <div class="col-md-2">
        <label for="calories" class="form-label">Calories ğŸ”¥</label>
        <input formControlName="calories" type="number" class="form-control">
      </div>

      <!-- âœ… Distance -->
      <div class="col-md-2">
        <label for="distance" class="form-label">Distance (km)</label>
        <input formControlName="distance" type="number" step="0.1" class="form-control">
      </div>

      <!-- âœ… Steps -->
      <div class="col-md-2">
        <label for="steps" class="form-label">Pas ğŸ‘£</label>
        <input formControlName="steps" type="number" class="form-control">
      </div>

      <!-- âœ… Sommeil -->
      <div class="col-md-2">
        <label for="sommeil" class="form-label">Sommeil (h) ğŸ’¤</label>
        <input formControlName="sommeil" type="number" step="0.1" class="form-control">
      </div>

      <!-- âœ… Commentaire -->
      <div class="col-md-4">
        <label for="commentaire" class="form-label">Commentaire</label>
        <input formControlName="commentaire" type="text" class="form-control">
      </div>

      <!-- âœ… Bouton -->
      <div class="col-12 text-end">
        <button type="submit" class="btn btn-success mt-2">â• Ajouter</button>
      </div>
    </div>
  </form>

  <!-- âœ… TABLEAU -->
  <div class="bg-dark p-3 rounded mb-4">
    <h5>ğŸ“‹ Liste des suivis</h5>
    <table class="table table-bordered table-hover text-white table-dark table-sm">
      <thead>
        <tr>
          <th>Utilisateur</th>
          <th>Date</th>
          <th>Poids</th>
          <th>RÃ©pÃ©titions</th>
          <th>BPM</th>
          <th>Calories</th>
          <th>Distance</th>
          <th>Steps</th>
          <th>Sommeil</th>
          <th>Commentaire</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let suivi of filteredSuivis">
          <td>{{ suivi.user?.name }} ({{ suivi.user?.email }})</td>
          <td>{{ suivi.date }}</td>
          <td>{{ suivi.poids || '-' }}</td>
          <td>{{ suivi.repetitions || '-' }}</td>
          <td>{{ suivi.battement_heart_rate || '-' }}</td>
          <td>{{ suivi.calories || '-' }}</td>
          <td>{{ suivi.distance || '-' }}</td>
          <td>{{ suivi.steps || '-' }}</td>
          <td>{{ suivi.sommeil || '-' }}</td>
          <td>{{ suivi.commentaire || '-' }}</td>
          <td>
            <button (click)="supprimerSuivi(suivi.id)" class="btn btn-sm btn-danger">ğŸ—‘ï¸</button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- âœ… GRAPHIQUE -->
  <div class="bg-dark p-4 rounded shadow">
    <canvas id="suiviChart"></canvas>
  </div>
</div>
